#
# Copyright (c) 2025 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

#------------------------------------------------------------------------#
# -Application Configuration START
CONFIG_SOCKET_STACK_SIZE=6144
CONFIG_ENCODER_STACK_SIZE=24000
CONFIG_BUTTON_PUBLISH_STACK_SIZE= 512
# -Application Configuration END
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# -General Kernel Options START
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_HEAP_MEM_POOL_SIZE=70000
CONFIG_INIT_STACKS=y
# -General Kernel Options END
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# -General Architecture Options START
# --Interrupt Configuration START
CONFIG_ISR_TABLES_LOCAL_DECLARATION=y #depended by CONFIG_LTO
# --Interrupt Configuration END
# -General Architecture Options END
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# -Device Drivers START
# --Flash drivers START
CONFIG_FLASH=y
# CONFIG_FLASH_PAGE_LAYOUT=y #selected by CONFIG_NVS
# ---Flash map abstraction module START
CONFIG_FLASH_MAP=y
# ---Flash map abstraction module END
# --Flash drivers END
# --Wi-Fi drivers START
CONFIG_WIFI=y
CONFIG_WIFI_CREDENTIALS=y
CONFIG_WIFI_CREDENTIALS_SHELL=y
CONFIG_WIFI_CREDENTIALS_CONNECT_STORED=y
CONFIG_WIFI_NM_WPA_SUPPLICANT=y #select POSIX_API POSIX_TIMERS NET_SOCKETS
# SoftAP disable auto disconnect
# CONFIG_WIFI_MGMT_AP_STA_INACTIVITY_TIMEOUT=0 
# CONFIG_WIFI_MGMT_AP_STA_SKIP_INACTIVITY_POLL=n 
# --Wi-Fi drivers END
# -Device Drivers START
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# Modules START
# --Nordic nRF Connect START
# CONFIG_MAIN_STACK_SIZE= #Multiple definitions
# ---Subsystems START
# ----Networking START
# ----- Application Protocol START
# ------Wi-Fi Ready Library START
# CONFIG_WIFI_READY_LIB=y # replaced by WPA supplicant event check
# ------Wi-Fi Ready Library END
# ----- Application Protocol END
# -----L2 Wi-Fi Connectivity START
CONFIG_L2_WIFI_CONNECTIVITY=y #depends on NET_CONNECTION_MANAGER select NET_CONNECTION_MANAGER_CONNECTIVITY_WIFI_MGMT
CONFIG_L2_WIFI_CONNECTIVITY_AUTO_CONNECT=y
CONFIG_L2_WIFI_CONNECTIVITY_AUTO_DOWN=y
# -----L2 Wi-Fi Connectivity END
# ----Networking END
# ---Subsystems END
# ---Libraries START
# ----Button and LED Library for Nordic DKs START
CONFIG_DK_LIBRARY=y
# ----Button and LED Library for Nordic DKs END
# ----Hardware ID START
CONFIG_HW_ID_LIBRARY=y
CONFIG_HW_ID_LIBRARY_SOURCE_NET_MAC=y
# ----Hardware ID END
# ---Libraries END
# --Nordic nRF Connect END
# Modules END
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# -C Library START
# -- C Library Implementation START
# CONFIG_PICOLIBC=y
# CONFIG_NEWLIB_LIBC
# -- C Library Implementation END
# -C Library END
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# -Additional libraries START
# --OS Support Library START
CONFIG_REBOOT=y # Selected by CONFIG_TASK_WDT
# --OS Support Library END
# -Additional libraries END
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# -Subsystems and OS Services START
# --System Monitoring Options START
# CONFIG_THREAD_ANALYZER=y #Enable Segger Ozone Support
# CONFIG_THREAD_ANALYZER_AUTO=y # printk/log periotic thread information
# CONFIG_THREAD_ANALYZER_AUTO_INTERVAL=10
# --System Monitoring Options END
# --Debugging Options START
# CONFIG_STACK_SENTINEL=y
# --Debugging Options END
# --File Systems START
# CONFIG_FILE_SYSTEM=y
# CONFIG_FILE_SYSTEM_LITTLEFS=y
# CONFIG_NVS=y
# ---Zephyr Memory Storag(ZMS) START
CONFIG_ZMS=y
# ---Zephyr Memory Storage(ZMS) END
# --File Systems END
# --Logging START
CONFIG_LOG=y
CONFIG_LOG_MODE_DEFERRED=y
# --Logging END
# --Networking START
CONFIG_NETWORKING=y
# CONFIG_NET_SHELL=y
# ---L2 Link layer START
CONFIG_NET_L2_WIFI_SHELL=y
# ---L2 Link layer END
# ---IP Stack START
CONFIG_NET_IPV4=y
CONFIG_NET_IPV6=n
CONFIG_NET_UDP=y
CONFIG_NET_TCP=n
CONFIG_NET_CONNECTION_MANAGER_MONITOR_STACK_SIZE=4850
# ---Network Libraries START
# ----Set network settings for applications START
CONFIG_NET_CONFIG_SETTINGS=y
CONFIG_NET_CONFIG_INIT_TIMEOUT=0
# ----Set network settings for applications END
# ----BSD Sockets compatible API START
# CONFIG_NET_SOCKETS=y
# ----BSD Sockets compatible API END
# ---Network Libraries END
# ---Network additional services START
# ----Network DHCPv4 START
CONFIG_NET_DHCPV4=y # DHCPv4 client, must be disabled for SoftAP
# ----Network DHCPv4 END
# --Network additional services END
# ---Network connection manager START
CONFIG_NET_CONNECTION_MANAGER=y # conn_mgr_*
# ---Network connection manager END
# --Networking END
# --Settings START
CONFIG_SETTINGS=y
# CONFIG_SETTINGS_ZMS=y #default SETTINGS_ZMS if ZMS
# --Settings END
# --Shell START
CONFIG_SHELL=y
CONFIG_SHELL_STACK_SIZE=8192
# --Shell END
# --Random Number Generators START
CONFIG_ENTROPY_GENERATOR=y
# --Random Number Generators END
# --Task-level software watchdog START
CONFIG_TASK_WDT=n # select CONFIG_REBOOT
# --Task-level software watchdog END
# --Zbus support START
CONFIG_ZBUS=y
CONFIG_ZBUS_LOG_LEVEL_INF=y
CONFIG_ZBUS_CHANNEL_NAME=y
CONFIG_ZBUS_OBSERVER_NAME=y
CONFIG_ZBUS_MSG_SUBSCRIBER=y
CONFIG_ZBUS_MSG_SUBSCRIBER_NET_BUF_POOL_SIZE=32
# --Zbus support START
# -Subsystems and OS Services END
#------------------------------------------------------------------------#

#------------------------------------------------------------------------#
# -Build and Link Features START
# -- Compiler Options START
CONFIG_LTO=y
# Disable double promotion warnings in opus library
CONFIG_COMPILER_OPT="-Wno-double-promotion -Wno-maybe-uninitialized -Wno-unused-variable -Wno-stringop-overflow"
# -- Compiler Options END
# -Build and Link Features END
#------------------------------------------------------------------------#
