#
# Copyright (c) 2024 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

#------------------------------------------------------------------------#
rsource "Kconfig.defaults"

menu "WiFi Audio Transceiver"
          
choice AUDIO_DEV_ROLE
	prompt "Choose device role from transmite, receiver and walkie talkie"
	default AUDIO_GATEWAY

config AUDIO_GATEWAY
	bool "Play audio stream transmiter role"

config AUDIO_HEADSET
	bool "Play audio stream receiver role"

endchoice #AUDIO_DEV_ROLE

config AUDIO_WALKIE_TALKIE
	bool "Enable walkie talkie feature, can enabled on both gateway and headset"
        default n

endmenu # "Audio Stream Transceiver"

if (AUDIO_GATEWAY = y)
rsource "wifi_audio_gateway/Kconfig.defaults"
endif

if (AUDIO_HEADSET = y)
rsource "wifi_audio_headset/Kconfig.defaults"
endif 

rsource "src/audio/Kconfig"
rsource "src/net/Kconfig"
rsource "src/drivers/Kconfig"
rsource "src/modules/Kconfig"
rsource "src/utils/Kconfig"
rsource "src/debug/Kconfig"

#------------------------------------------------------------------------#
menu "Latency Measurement"

config LATENCY_MEASUREMENT
	bool "Enable GPIO-based latency measurement system"
	default n
	help
	  Enable the latency measurement system that uses GPIO pins to generate
	  timing pulses for external measurement equipment like PPK2.
	  This tracks 8 timing points (T1-T8) across the audio pipeline.

config LATENCY_MEASUREMENT_FRAME_COUNT
	int "Number of frames for automated test"
	default 10
	range 1 100
	depends on LATENCY_MEASUREMENT
	help
	  Number of frames to generate during automated latency test
	  triggered by button press. Each frame goes through the complete
	  audio pipeline with timing measurements.

config LATENCY_MEASUREMENT_FRAME_INTERVAL
	int "Interval between test frames (ms)"
	default 1000
	range 100 10000
	depends on LATENCY_MEASUREMENT
	help
	  Time interval in milliseconds between each test frame during
	  automated latency measurement. Longer intervals provide better
	  separation for analysis but increase total test time.

config LATENCY_PULSE_DURATION_MS
	int "GPIO pulse duration (milliseconds)"
	default 100
	range 1 1000
	depends on LATENCY_MEASUREMENT
	help
	  Duration of GPIO timing pulses in milliseconds. Should be long
	  enough for reliable detection by measurement equipment but short
	  enough to minimize system impact.

config LATENCY_MEASUREMENT_DEBUG
	bool "Enable debug output for timing events"
	default n
	depends on LATENCY_MEASUREMENT
	help
	  Enable detailed logging of timing events for debugging the
	  latency measurement system. Useful for verifying correct
	  timing point triggers.

endmenu # "Latency Measurement"

#------------------------------------------------------------------------#
menu "Logging"

module = MAIN
module-str = main
source "subsys/logging/Kconfig.template.log_config"

config PRINT_STACK_USAGE_MS
	depends on THREAD_ANALYZER && INIT_STACKS
	int "Print stack usage every x milliseconds"
	default 5000

endmenu # Log levels

source "Kconfig.zephyr"
